<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>SAVE THE DATE ‚Äì Laura & Javier ¬∑ 22 agosto 2026</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#faf8f5; --ink:#243039;
    --brand:#2e7d6b;      /* verde */
    --accent:#d39b5b;     /* dorado */
    --env-base:#fff1e2;   /* crudo sobre */
    --env-flap:#e3c9a6;   /* solapa crudo */
    --env-border:#e5d4bf; /* borde sobre */
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:var(--bg);color:var(--ink);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial}

  .stage{
    min-height:100svh; display:flex; align-items:center; justify-content:center; padding:24px;
    background: radial-gradient(1000px 320px at 50% 100%, rgba(46,125,107,.10), transparent 90%),
               linear-gradient(180deg,#f5f1eb,#ffffff);
    perspective:1600px;
  }

  /* --- SOBRE (m√°s peque√±o y PUNTAS RECTAS) --- */
  .envelope{
    --w: clamp(360px, 84vw, 860px);      /* m√°s peque√±o que antes */
    --h: calc(var(--w) * 0.62);
    width:var(--w); height:var(--h);
    position:relative; transform-style:preserve-3d;
    filter: drop-shadow(0 12px 28px rgba(0,0,0,.18));
    overflow:visible; cursor:pointer;
  }
  .env-base{
    position:absolute; inset:0; z-index:1;
    background:var(--env-base);
    border:2px solid var(--env-border); border-radius:0;   /* recto */
    background-image:
      linear-gradient(135deg, transparent 90%, rgba(0,0,0,.04) 75%, transparent 90%),
      linear-gradient(225deg, transparent 90%, rgba(0,0,0,.04) 75%, transparent 90%);
    background-size:16px 16px; background-position: top left, top right;
  }
  .drop{ position:absolute; left:6%; right:6%; bottom:-10px; height:20px; z-index:1;
    background:radial-gradient(60% 100% at 50% 0, rgba(0,0,0,.16), transparent 72%); filter:blur(8px); }

  /* SOLAPA: abre hacia ARRIBA con bisagra arriba; sin curvas en las puntas */
  .env-flap{
    position:absolute; z-index:3; left:0; right:0; top:0;
    height:calc(var(--h)*0.58);
    background:var(--env-flap);
    clip-path:polygon(0 0,100% 0,50% 100%); /* tri√°ngulo */
    transform-origin:50% 0%;
    transform:rotateX(0deg) translateZ(1px);
    backface-visibility:hidden;
    transition:transform .9s cubic-bezier(.22,1,.36,1);
  }
  .envelope.open .env-flap{ transform:rotateX(-180deg) translateZ(1px); }

  /* SELLO redondo EN EL PICO (bot√≥n real) */
  .seal{
    position:absolute; z-index:5;
    top:calc(var(--h)*0.58); left:50%;
    transform:translate(-50%, -42%); /* coloca justo en el pico */
    width:56px; height:56px; border-radius:50%;
    background:
      radial-gradient(60% 60% at 35% 35%, rgba(255,255,255,.6), transparent 80%),
      radial-gradient(circle at 50% 50%, #d6b48a, #b89064 70%, #a67c52 100%);
    box-shadow: inset 0 6px 10px rgba(0,0,0,.25), 0 2px 4px rgba(0,0,0,.15),
                0 0 0 2px #ffffffa8;
    transition: opacity .35s ease, transform .2s ease; 
    cursor:pointer;
    display:flex; align-items:center; justify-content:center;
  }
  .seal:active{ transform:translate(-50%,-42%) scale(.96) }
  .envelope.open .seal{ opacity:0; pointer-events:none; transform:translate(-50%,-60%) scale(.94) }

  /* --- CARTA (contenido completo) --- */
  .letter{
    position:absolute; z-index:5; left:0; right:0; top:0; bottom:0;
    margin:14px;                       /* margen interior del sobre */
    background:#fffdf8; border:1px solid #efdfc7; border-radius:12px;
    display:flex; flex-direction:column; overflow:hidden;
    opacity:0; transform:translateY(0); pointer-events:none;
    transition: transform .9s cubic-bezier(.22,1,.36,1) .05s, opacity .25s ease;
  }
  /* Sube suficiente para que no tape el sobre en desktop */
  .envelope.open .letter{
    transform: translateY(calc(-1 * var(--h) * 0.95));
    box-shadow: 0 18px 40px rgba(0,0,0,.20);
    opacity:1; pointer-events:auto;
  }
  /* Modo lectura: centrada perfecta y grande */
  .letter.float{
    position:fixed; z-index:6;
    top:50%; left:50%;
    transform: translate(-50%, -50%) !important;
    width:min(980px, 94vw);
    height:min(90vh, 880px);
    border-radius:14px;
  }

  .letter-head{ text-align:center; padding:18px 16px 12px; border-bottom:1px dashed #efdfc7}
  .names{ font-family:"Playfair Display",serif; font-weight:600; font-size:34px; color:var(--brand)}
  .note{font-size:13px;color:#66737c}

  .letter-body{ padding:18px; max-height:min(74vh, 760px); overflow:auto; }
  .letter.float .letter-body{ max-height: calc(100% - 130px); }

  .h1{font-family:"Playfair Display",serif;font-size:26px;margin:0 0 8px}
  .meta{display:flex;flex-wrap:wrap;gap:8px;color:#51606b;margin:8px 0 12px}
  .pill{padding:8px 12px;background:#f4f6f5;border-radius:999px;border:1px solid #e9eeea;font-size:14px}
  .divider{height:1px;background:linear-gradient(90deg,transparent,#e9e3da,transparent);margin:12px 0}

  .grid{display:grid;gap:12px}
  .two{grid-template-columns:1fr 1fr}
  @media (max-width:720px){ .two{grid-template-columns:1fr} }

  .tile{border:1px solid #eee;border-radius:12px;padding:14px;background:#fffaf3}
  .tile h3{margin:0 0 6px;font-family:"Playfair Display",serif;font-size:20px}
  .countdown{font-variant-numeric:tabular-nums;font-size:22px;font-weight:700;color:var(--accent)}

  .btn{appearance:none;border:0;border-radius:999px;padding:12px 18px;cursor:pointer;font-weight:600;font-size:15px}
  .btn-primary{background:var(--brand);color:#fff;box-shadow:0 6px 16px rgba(46,125,107,.35)}
  .btn:active{transform:translateY(1px)}
  a.pill{ text-decoration:none; color:inherit }

  /* Ocultar el cascar√≥n cuando est√© abierto (queda solo la carta) */
  .shell-hidden .env-base,
  .shell-hidden .env-flap,
  .shell-hidden .drop{
    opacity:0;
    transform: translateY(-8px) scale(0.98);
    pointer-events:none;
    transition: opacity .35s ease, transform .45s ease;
  }
  .shell-hidden{ cursor: default; }

  /* Confeti arriba del todo */
  canvas#confetti{position:fixed;inset:0;pointer-events:none;z-index:9999}
</style>
</head>
<body>
<canvas id="confetti"></canvas>

<div class="stage">
  <div class="envelope" id="envelope" aria-label="Abrir invitaci√≥n" role="button" tabindex="0">
    <div class="env-base"></div>
    <div class="drop"></div>
    <div class="env-flap"></div>

    <!-- SELLO en el pico: bot√≥n real -->
    <div class="seal" id="seal" aria-label="Abrir invitaci√≥n" role="button" tabindex="0"></div>

    <!-- CARTA con todo el contenido -->
    <div class="letter" id="letter" aria-hidden="true">
      <div class="letter-head">
        <div class="names">Laura & Javier</div>
      </div>

      <div class="letter-body">
        <h2 class="h1">SAVE THE DATE</h2>
        <div class="meta">
          <div class="pill">S√°bado, 22 de agosto de 2026 ¬∑ 13:00</div>
          <div class="pill">Ermita de Nuestra Se√±ora de La Lanzada</div>
          <div class="pill">Celebraci√≥n: Lagar de Pintos</div>
        </div>

        <div class="divider"></div>

       /* <div class="grid two">
          <div class="tile">
            <h3>Cuenta atr√°s</h3>
            <div id="countdown" class="countdown">-- d√≠as ¬∑ --:--:--</div>
            <div class="note">¬°Qu√© ganas de celebrarlo con vosotros!</div>
          </div>
          <div class="tile">
            <h3>Informaci√≥n √∫til</h3>
            <div class="note">
              Dress code: elegante.<br>
              Autobuses de regreso: 01:00 y 03:30.<br>
              Alergias/intolerancias: indicadlo en el RSVP.
            </div>
          </div>
        </div> */
    

        <div class="tile" style="margin-top:12px">
          <h3>Ubicaciones</h3>
          <div class="grid two">
            <a class="pill" href="https://maps.google.com/?q=Ermita%20de%20Nuestra%20Se%C3%B1ora%20de%20La%20Lanzada" target="_blank" rel="noopener">üìç Ceremonia ¬∑ Ver mapa</a>
            <a class="pill" href="https://maps.google.com/?q=Lagar%20de%20Pintos" target="_blank" rel="noopener">üìç Celebraci√≥n ¬∑ Ver mapa</a>
          </div>
        </div>

        <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:14px">
          <a class="btn btn-primary" href="https://forms.gle/tu-formulario" target="_blank" rel="noopener">Confirmar asistencia (RSVP)</a>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  const weddingDate = new Date(2026, 7, 22, 13, 0);
  const envelope = document.getElementById('envelope');
  const letter   = document.getElementById('letter');
  const seal     = document.getElementById('seal');

  function openInvite(){
    if(envelope.classList.contains('open')) return;
    envelope.classList.add('open');
    letter.removeAttribute('aria-hidden');
    burstConfetti();
    setTimeout(()=>{
      letter.classList.add('float');          // centra y agranda
      envelope.classList.add('shell-hidden'); // oculta el sobre
    }, 950);
  }

  // El SELLO del pico es el bot√≥n
  seal.addEventListener('click', (e)=>{ e.stopPropagation(); openInvite(); });
  seal.addEventListener('keypress', (e)=>{ if(e.key==='Enter'||e.key===' '){ e.stopPropagation(); openInvite(); }});

  // Tambi√©n permitir click general por accesibilidad
  envelope.addEventListener('click', openInvite);
  envelope.addEventListener('keypress', e=>{ if(e.key==='Enter'||e.key===' '){ openInvite(); }});

  // Cuenta atr√°s
  function tick(){
    const now = new Date();
    const diff = weddingDate - now;
    const el = document.getElementById('countdown');
    if(diff <= 0){ el.textContent = '¬°Es hoy!'; return; }
    const d = Math.floor(diff / (1000*60*60*24));
    const h = Math.floor((diff / (1000*60*60)) % 24).toString().padStart(2,'0');
    const m = Math.floor((diff / (1000*60)) % 60).toString().padStart(2,'0');
    const s = Math.floor((diff / 1000) % 60).toString().padStart(2,'0');
    el.textContent = `${d} d√≠as ¬∑ ${h}:${m}:${s}`;
    setTimeout(tick, 1000);
  }
  tick();

  // Confeti
  const canvas = document.getElementById('confetti');
  const ctx = canvas.getContext('2d');
  let W,H,pieces=[],animating=false;
  function resize(){ W = canvas.width = window.innerWidth; H = canvas.height = window.innerHeight; }
  window.addEventListener('resize', resize); resize();

  function burstConfetti(){
    const colors = ['#2e7d6b','#d39b5b','#e8d8c7','#ffffff'];
    pieces = [];
    for(let i=0;i<140;i++){
      pieces.push({
        x: W/2, y: H/2, r: Math.random()*6+2,
        c: colors[Math.floor(Math.random()*colors.length)],
        vx: (Math.random()-0.5)*7,
        vy: (Math.random()-1.1)*8,
        g: 0.22+Math.random()*0.09,
        a: 1
      });
    }
    if(!animating){ animating = true; requestAnimationFrame(loop); }
    setTimeout(()=>{ pieces = []; }, 2000);
  }
  function loop(){
    ctx.clearRect(0,0,W,H);
    for(const p of pieces){
      p.vy += p.g; p.x += p.vx; p.y += p.vy; p.a -= 0.012;
      ctx.globalAlpha = Math.max(p.a,0);
      ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fillStyle=p.c; ctx.fill();
    }
    ctx.globalAlpha = 1;
    pieces = pieces.filter(p=>p.a>0 && p.y<H+40);
    if(pieces.length){ requestAnimationFrame(loop); }
    else { animating=false; }
  }
</script>
</body>
</html>
