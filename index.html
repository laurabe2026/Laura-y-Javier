<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>SAVE THE DATE</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#faf8f5; --ink:#243039; --brand:#2e7d6b; --accent:#d39b5b;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;color:var(--ink,#243039);background:var(--bg,#faf8f5);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial}
  /* Escenario a pantalla completa */
  .stage{min-height:100svh;display:flex;align-items:center;justify-content:center;padding:24px;
    background:
      radial-gradient(1200px 340px at 50% 100%, rgba(46,125,107,.15), transparent 60%),
      linear-gradient(180deg,#f4efe9,#ffffff);}
  .hint{position:absolute;top:14px;left:50%;transform:translateX(-50%);font-size:13px;color:#58666f;opacity:.9}

  /* Envelope centrado y responsivo */
  .envelope{
    --w: clamp(320px, 72vw, 640px);
    --h: calc(var(--w) * 0.62);
    width:var(--w); height:var(--h);
    position:relative; cursor:pointer; transform-style:preserve-3d; perspective:1000px;
    filter: drop-shadow(0 10px 26px rgba(0,0,0,.18));
    overflow:visible; /* para que la carta pueda salir del sobre */
  }
  .env-base{
    position:absolute; inset:0; background:#fff; border:1px solid #eee; border-radius:12px;
    background-image:
      linear-gradient(135deg, transparent 75%, rgba(0,0,0,.035) 76%, transparent 78%),
      linear-gradient(225deg, transparent 75%, rgba(0,0,0,.035) 76%, transparent 78%);
    background-size: 16px 16px; background-position: top left, top right;
  }
  /* Solapa superior que abre hacia arriba */
  .env-flap{
    position:absolute; left:0; right:0; top:-1px; height:0;
    border-left: calc(var(--w)/2) solid transparent;
    border-right: calc(var(--w)/2) solid transparent;
    border-bottom: calc(var(--h)*0.56) solid var(--accent,#d39b5b);
    transform-origin:50% 100%; transform: rotateX(0deg);
    transition: transform .9s cubic-bezier(.22,1,.36,1);
  }
  .envelope.open .env-flap{ transform: rotateX(-180deg); } /* abre hacia arriba */

  /* Carta: contiene TODO el contenido de la invitación */
  .letter{
    position:absolute; left:10px; right:10px; top:10px; bottom:10px;
    background:#fffdf8; border-radius:10px; border:1px solid #efe3d1;
    display:flex; flex-direction:column; overflow:hidden;
    transform: translateY(0); transition: transform .9s cubic-bezier(.22,1,.36,1) .04s;
  }
  /* Al abrir, la carta sale hacia arriba y queda delante */
  .envelope.open .letter{
    transform: translateY(calc(-1 * var(--h) * 0.55));
    box-shadow: 0 16px 38px rgba(0,0,0,.18);
  }

  .letter-head{ text-align:center; padding:16px 12px 12px; border-bottom:1px dashed #efdfc7}
  .letter-head .note{font-size:13px;color:#6a767f}
  .names{ font-family:"Playfair Display",serif; font-weight:600; font-size:30px; color:var(--brand,#2e7d6b)}
  .letter-body{
    /* altura de la zona scrollable cuando la carta está fuera del sobre */
    padding:16px 18px 18px;
    max-height: min(72vh, 720px);
    overflow:auto;
  }

  .h1{font-family:"Playfair Display",serif;font-size:26px;margin:0 0 6px}
  .meta{display:flex;flex-wrap:wrap;gap:8px;color:#51606b;margin:8px 0 10px}
  .pill{padding:8px 12px;background:#f4f6f5;border-radius:999px;border:1px solid #e9eeea;font-size:14px}
  .divider{height:1px;background:linear-gradient(90deg,transparent,#e9e3da,transparent);margin:10px 0}
  .grid{display:grid;gap:12px}
  .two{grid-template-columns:1fr 1fr}
  @media (max-width:700px){ .two{grid-template-columns:1fr} }
  .tile{border:1px solid #eee;border-radius:12px;padding:14px;background:#fffaf3}
  .tile h3{margin:0 0 6px;font-family:"Playfair Display",serif;font-size:20px}
  .countdown{font-variant-numeric:tabular-nums;font-size:22px;font-weight:700;color:var(--accent,#d39b5b)}

  .btn{appearance:none;border:0;border-radius:999px;padding:12px 18px;cursor:pointer;font-weight:600;font-size:15px}
  .btn-primary{background:var(--brand,#2e7d6b);color:#fff;box-shadow:0 6px 16px rgba(46,125,107,.35)}
  .btn-ghost{background:transparent;color:var(--brand,#2e7d6b);border:1px solid #cfe0d6}
  .btn:active{transform:translateY(1px)}

  /* Confeti siempre por encima */
  canvas#confetti{position:fixed;inset:0;pointer-events:none;z-index:9999}
</style>
</head>
<body>
<canvas id="confetti"></canvas>

<div class="stage">
  <div class="hint">Toca el sobre para abrir la invitación</div>

  <div class="envelope" id="envelope" aria-label="Abrir invitación" role="button" tabindex="0">
    <div class="env-base"></div>
    <div class="env-flap"></div>

    <!-- TODO el contenido vive dentro de la carta -->
    <div class="letter" id="letter">
      <div class="letter-head">
        <div class="names">Laura & Javier</div>
        <div class="note">22 · agosto · 2026 · Pontevedra</div>
      </div>

      <div class="letter-body">
        <h2 class="h1">¡Nos casamos!</h2>
        <div class="meta">
          <div class="pill">Sábado, 22 de agosto de 2026 · 13:00</div>
          <div class="pill">Ermita de A Lanzada</div>
          <div class="pill">Celebración: Lagar de Pintos</div>
        </div>

        <div class="divider"></div>

        <div class="grid two">
          <div class="tile">
            <h3>Cuenta atrás</h3>
            <div id="countdown" class="countdown">-- días · --:--:--</div>
            <div class="note">¡Qué ganas de celebrarlo con vosotros!</div>
          </div>
          <div class="tile">
            <h3>Información útil</h3>
            <div class="note">
              Dress code: elegante.<br>
              Autobuses de regreso: 01:00 y 03:30.<br>
              Alergias/intolerancias: indicadlo en el RSVP.
            </div>
          </div>
        </div>

        <div class="tile" style="margin-top:12px">
          <h3>Ubicaciones</h3>
          <div class="grid two">
            <a class="pill" href="https://maps.google.com/?q=Ermita%20de%20A%20Lanzada" target="_blank" rel="noopener">📍 Ceremonia · Ver mapa</a>
            <a class="pill" href="https://maps.google.com/?q=Lagar%20de%20Pintos" target="_blank" rel="noopener">📍 Celebración · Ver mapa</a>
          </div>
        </div>

        <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:14px">
          <a class="btn btn-primary" href="https://forms.gle/tu-formulario" target="_blank" rel="noopener">Confirmar asistencia (RSVP)</a>
          <button class="btn btn-ghost" id="btnToggle">Cerrar/Abrir sobre</button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // 1) Fecha de la boda para la cuenta atrás (AAAA, MM-1, DD, HH, mm)
  const weddingDate = new Date(2026, 7, 22, 13, 0);

  // 2) Abrir/cerrar sobre
  const envelope = document.getElementById('envelope');
  const btnToggle = document.getElementById('btnToggle');

  function openInvite(){
    if(!envelope.classList.contains('open')){
      envelope.classList.add('open');
      burstConfetti();
    }
  }
  function toggleInvite(e){
    e?.stopPropagation();
    envelope.classList.toggle('open');
    if(envelope.classList.contains('open')) burstConfetti();
  }
  envelope.addEventListener('click', openInvite);
  envelope.addEventListener('keypress', (e)=>{ if(e.key==='Enter' || e.key===' '){ openInvite(); }});
  btnToggle.addEventListener('click', toggleInvite);

  // 3) Cuenta atrás
  function tick(){
    const now = new Date();
    const diff = weddingDate - now;
    const el = document.getElementById('countdown');
    if(!el) return;
    if(diff <= 0){ el.textContent = '¡Es hoy!'; return; }
    const d = Math.floor(diff / (1000*60*60*24));
    const h = Math.floor((diff / (1000*60*60)) % 24).toString().padStart(2,'0');
    const m = Math.floor((diff / (1000*60)) % 60).toString().padStart(2,'0');
    const s = Math.floor((diff / 1000) % 60).toString().padStart(2,'0');
    el.textContent = `${d} días · ${h}:${m}:${s}`;
    setTimeout(tick, 1000);
  }
  tick();

  // 4) Confeti visible
  const canvas = document.getElementById('confetti');
  const ctx = canvas.getContext('2d');
  let W,H,pieces=[],animating=false;
  function resize(){ W = canvas.width = window.innerWidth; H = canvas.height = window.innerHeight; }
  window.addEventListener('resize', resize); resize();

  function burstConfetti(){
    const colors = ['#2e7d6b','#d39b5b','#e8d8c7','#ffffff']; // verde + dorado
    pieces = [];
    for(let i=0;i<140;i++){
      pieces.push({
        x: W/2, y: H/2, r: Math.random()*6+2,
        c: colors[Math.floor(Math.random()*colors.length)],
        vx: (Math.random()-0.5)*7,
        vy: (Math.random()-1.1)*8,
        g: 0.22+Math.random()*0.09,
        a: 1
      });
    }
    if(!animating){ animating = true; requestAnimationFrame(loop); }
    setTimeout(()=>{ pieces = []; }, 2000);
  }
  function loop(){
    ctx.clearRect(0,0,W,H);
    for(const p of pieces){
      p.vy += p.g; p.x += p.vx; p.y += p.vy; p.a -= 0.012;
      ctx.globalAlpha = Math.max(p.a,0);
      ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fillStyle=p.c; ctx.fill();
    }
    ctx.globalAlpha = 1;
    pieces = pieces.filter(p=>p.a>0 && p.y<H+40);
    if(pieces.length){ requestAnimationFrame(loop); }
    else { animating=false; }
  }
</script>
</body>
</html>
